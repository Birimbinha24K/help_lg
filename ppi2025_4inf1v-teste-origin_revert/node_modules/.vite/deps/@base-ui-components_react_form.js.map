{
  "version": 3,
  "sources": ["../../@base-ui-components/react/esm/form/Form.js"],
  "sourcesContent": ["'use client';\n\nimport * as React from 'react';\nimport { useEventCallback } from '@base-ui-components/utils/useEventCallback';\nimport { FormContext } from \"./FormContext.js\";\nimport { useRenderElement } from \"../utils/useRenderElement.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst EMPTY = {};\n\n/**\n * A native form element with consolidated error handling.\n * Renders a `<form>` element.\n *\n * Documentation: [Base UI Form](https://base-ui.com/react/components/form)\n */\nexport const Form = /*#__PURE__*/React.forwardRef(function Form(componentProps, forwardedRef) {\n  const {\n    render,\n    className,\n    errors,\n    onClearErrors: onClearErrorsProp,\n    onSubmit: onSubmitProp,\n    ...elementProps\n  } = componentProps;\n  const formRef = React.useRef({\n    fields: new Map()\n  });\n  const submittedRef = React.useRef(false);\n  const onSubmit = useEventCallback(onSubmitProp);\n  const onClearErrors = useEventCallback(onClearErrorsProp);\n  const focusControl = useEventCallback(control => {\n    control.focus();\n    if (control.tagName === 'INPUT') {\n      control.select();\n    }\n  });\n  React.useEffect(() => {\n    if (!submittedRef.current) {\n      return;\n    }\n    submittedRef.current = false;\n    const invalidFields = Array.from(formRef.current.fields.values()).filter(field => field.validityData.state.valid === false);\n    if (invalidFields.length) {\n      focusControl(invalidFields[0].controlRef.current);\n    }\n  }, [errors, focusControl]);\n  const element = useRenderElement('form', componentProps, {\n    state: EMPTY,\n    ref: forwardedRef,\n    props: [{\n      noValidate: true,\n      onSubmit(event) {\n        let values = Array.from(formRef.current.fields.values());\n\n        // Async validation isn't supported to stop the submit event.\n        values.forEach(field => {\n          field.validate();\n        });\n        values = Array.from(formRef.current.fields.values());\n        const invalidFields = values.filter(field => !field.validityData.state.valid);\n        if (invalidFields.length) {\n          event.preventDefault();\n          focusControl(invalidFields[0].controlRef.current);\n        } else {\n          submittedRef.current = true;\n          onSubmit(event);\n        }\n      }\n    }, elementProps]\n  });\n  const clearErrors = useEventCallback(name => {\n    if (name && errors && EMPTY.hasOwnProperty.call(errors, name)) {\n      const nextErrors = {\n        ...errors\n      };\n      delete nextErrors[name];\n      onClearErrors(nextErrors);\n    }\n  });\n  const contextValue = React.useMemo(() => ({\n    formRef,\n    errors: errors ?? {},\n    clearErrors\n  }), [formRef, errors, clearErrors]);\n  return /*#__PURE__*/_jsx(FormContext.Provider, {\n    value: contextValue,\n    children: element\n  });\n});\nif (process.env.NODE_ENV !== \"production\") Form.displayName = \"Form\";"],
  "mappings": ";;;;;;;;;;;;;;;;AAEA,YAAuB;AAIvB,yBAA4B;AAC5B,IAAM,QAAQ,CAAC;AAQR,IAAM,OAA0B,iBAAW,SAASA,MAAK,gBAAgB,cAAc;AAC5F,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA,eAAe;AAAA,IACf,UAAU;AAAA,IACV,GAAG;AAAA,EACL,IAAI;AACJ,QAAM,UAAgB,aAAO;AAAA,IAC3B,QAAQ,oBAAI,IAAI;AAAA,EAClB,CAAC;AACD,QAAM,eAAqB,aAAO,KAAK;AACvC,QAAM,WAAW,iBAAiB,YAAY;AAC9C,QAAM,gBAAgB,iBAAiB,iBAAiB;AACxD,QAAM,eAAe,iBAAiB,aAAW;AAC/C,YAAQ,MAAM;AACd,QAAI,QAAQ,YAAY,SAAS;AAC/B,cAAQ,OAAO;AAAA,IACjB;AAAA,EACF,CAAC;AACD,EAAM,gBAAU,MAAM;AACpB,QAAI,CAAC,aAAa,SAAS;AACzB;AAAA,IACF;AACA,iBAAa,UAAU;AACvB,UAAM,gBAAgB,MAAM,KAAK,QAAQ,QAAQ,OAAO,OAAO,CAAC,EAAE,OAAO,WAAS,MAAM,aAAa,MAAM,UAAU,KAAK;AAC1H,QAAI,cAAc,QAAQ;AACxB,mBAAa,cAAc,CAAC,EAAE,WAAW,OAAO;AAAA,IAClD;AAAA,EACF,GAAG,CAAC,QAAQ,YAAY,CAAC;AACzB,QAAM,UAAU,iBAAiB,QAAQ,gBAAgB;AAAA,IACvD,OAAO;AAAA,IACP,KAAK;AAAA,IACL,OAAO,CAAC;AAAA,MACN,YAAY;AAAA,MACZ,SAAS,OAAO;AACd,YAAI,SAAS,MAAM,KAAK,QAAQ,QAAQ,OAAO,OAAO,CAAC;AAGvD,eAAO,QAAQ,WAAS;AACtB,gBAAM,SAAS;AAAA,QACjB,CAAC;AACD,iBAAS,MAAM,KAAK,QAAQ,QAAQ,OAAO,OAAO,CAAC;AACnD,cAAM,gBAAgB,OAAO,OAAO,WAAS,CAAC,MAAM,aAAa,MAAM,KAAK;AAC5E,YAAI,cAAc,QAAQ;AACxB,gBAAM,eAAe;AACrB,uBAAa,cAAc,CAAC,EAAE,WAAW,OAAO;AAAA,QAClD,OAAO;AACL,uBAAa,UAAU;AACvB,mBAAS,KAAK;AAAA,QAChB;AAAA,MACF;AAAA,IACF,GAAG,YAAY;AAAA,EACjB,CAAC;AACD,QAAM,cAAc,iBAAiB,UAAQ;AAC3C,QAAI,QAAQ,UAAU,MAAM,eAAe,KAAK,QAAQ,IAAI,GAAG;AAC7D,YAAM,aAAa;AAAA,QACjB,GAAG;AAAA,MACL;AACA,aAAO,WAAW,IAAI;AACtB,oBAAc,UAAU;AAAA,IAC1B;AAAA,EACF,CAAC;AACD,QAAM,eAAqB,cAAQ,OAAO;AAAA,IACxC;AAAA,IACA,QAAQ,UAAU,CAAC;AAAA,IACnB;AAAA,EACF,IAAI,CAAC,SAAS,QAAQ,WAAW,CAAC;AAClC,aAAoB,mBAAAC,KAAK,YAAY,UAAU;AAAA,IAC7C,OAAO;AAAA,IACP,UAAU;AAAA,EACZ,CAAC;AACH,CAAC;AACD,IAAI;AAAuC,OAAK,cAAc;",
  "names": ["Form", "_jsx"]
}
